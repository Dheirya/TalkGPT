<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="preload" as="document" href="/screen.html"/>
    <link rel="preconnect" href="https://cdn.jsdelivr.net"/>
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net"/>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>TalkGPT - Talking Genie Personal Teacher</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/dheirya/talkgpt@v1.0/frontend/static/index.min.css">
</head>
<body>
    <div id="bottom-right-ribbon1">
          <a title="Social Rumbles - The Next Big Social Media Platform" href="https://socialrumbles.com/home/" target="_blank" style="color: white; text-decoration: none;">
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Social Rumbles
          </a>
      </div>
    <div id="bottom-right-ribbon2">
          <a title="See my Replit Post On This Project" href="https://replit.com/@dheiryat" target="_blank" style="color: white; text-decoration: none;">Replit</a>
      </div>
    <div class="device device-iphone-14-pro device-black" id="device">
        <div class="device-frame">
            <div class="device-screen">
                <iframe allow="autoplay" frameborder="0" class="device-screen" src="screen.html"></iframe>
            </div>
        </div>
        <div class="device-stripe"></div>
        <div class="device-header"></div>
        <div class="device-sensors"></div>
        <div class="device-btns"></div>
        <div class="device-power"></div>
        <div class="device-home"></div>
    </div>
    <div style="display: none" id="float-left" class="float">
        <img id="logo" src="https://cdn.jsdelivr.net/gh/dheirya/talkgpt@v1.0/frontend/static/logo.png" alt="logo">
        <p>The worlds first, free, internet-connected genie! Talk to our real genie (look to the right), the official <b>Talk</b>ing <b>G</b>enie <b>P</b>ersonal <b>T</b>alker!</p>
        <p>To start, just click the microphone icon on the right to enable your microphone. Our TalkGPT (see acronym above) will then be ready to assist and chat with you...</p>
        <p><b>Important Note:</b> The following content has been automatically generated by an AI system with limited internet access. It should be used for entertainment purposes only. We cannot guarantee the accuracy, completeness, or timeliness of the information provided.</p>
        <hr/>
        <p><small>If you liked this site and would want to support me, I would suggest you check out my Social Media Site, <a href="https://socialrumbles.com/home/" target="_blank">Social Rumbles</a>, and, if you so feel inclined to, maybe make an account on it! It would really make my day if you did :)</small></p>
    </div>
    <div style="display: none" id="float-right" class="float">
        <div id="stage">
        </div>
        <img src="https://cdn.jsdelivr.net/gh/dheirya/talkgpt@v1.0/frontend/static/up.png"/>
        <small style="margin-top: 5px"><i><b>or, take an actual look inside the code <a target="_blank" style="color: #fff" href="https://github.com/Dheirya/TalkGPT">here</a></b></i></small>
    </div>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/dheirya/talkgpt@v1.0/frontend/static/clippy.css">
    <script src="https://cdn.jsdelivr.net/gh/dheirya/talkgpt@v1.0/frontend/static/index.min.js"></script>
    <script>
        let genie;
        window.CLIPPY_CDN = "https://cdn.jsdelivr.net/gh/dheirya/talkgpt@v1.0/frontend/static/";
        function scaleElements() {
            const element = document.getElementById('device');
            const pageHeight = window.innerHeight - 20;
            const elementHeight = element.offsetHeight;
            const scalingFactor = (pageHeight / elementHeight);
            element.style.transform = `scale(${scalingFactor})`;
            const floatLeft = document.getElementById('float-left');
            const floatRight = document.getElementById('float-right');
            const floatWidth = (window.innerWidth - element.getBoundingClientRect().width) / 2 - 85;
            floatLeft.style.width = `${floatWidth}px`;
            floatRight.style.width = `${floatWidth}px`;
            const stage = document.getElementById("stage");
            stage.style.height = `${floatWidth}px`;
            document.getElementById("float-left").style.display = "block";
            document.getElementById("float-right").style.display = "flex";
        }
        function centerGenie(firstTime) {
            const stageDiv = document.getElementById('stage');
            const stageRect = stageDiv.getBoundingClientRect();
            const topLeftX = stageRect.left;
            const topLeftY = stageRect.top;
            const stageWidth = stageDiv.clientWidth;
            const stageHeight = stageDiv.clientHeight;
            genie.stop();
            genie.moveTo(topLeftX + (stageWidth - 128) / 2, topLeftY + (stageHeight - 128) / 2);
            if (firstTime) {
                genie.play("GestureRight");
            } else {
                genie.play("Wave");
            }
        }
        function debounce(func) {
            let timer;
            return function(event){
                if(timer) clearTimeout(timer);
                timer = setTimeout(func, 100, event);
            };
        }
        function handleMsg(e) {
            const genieX = document.getElementsByClassName("clippy")[0];
            const clippyRect = genieX.getBoundingClientRect();
            const gTopLeftX = clippyRect.left;
            const gTopLeftY = clippyRect.top;
            const stageDiv = document.getElementById('stage');
            const stageRect = stageDiv.getBoundingClientRect();
            const topLeftX = stageRect.left;
            const topLeftY = stageRect.top;
            const stageWidth = stageDiv.clientWidth;
            const stageHeight = stageDiv.clientHeight;
            if (gTopLeftX !== topLeftX + (stageWidth - 128) / 2 || gTopLeftY !== topLeftY + (stageHeight - 128) / 2) {
                centerGenie(false);
            } else {
                genie.stop();
                if (e.data == "Start Read") {
                    genie.play("Writing", 0);
                    genie.stopCurrent();
                } else if (e.data == "End Read") {
                    genie.play("Hearing_" + Math.floor(Math.random() * (4 - 1 + 1) + 1));
                } else if (e.data == "Thinking") {
                    genie.play("Thinking");
                } else if (e.data == "Wave") {
                    genie.play("Wave");
                } else if (e.data == "Declined") {
                    genie.play("Confused");
                    genie.play("GestureRight");
                }
            }
        }
        clippy.load('Merlin', function(agent) {
            genie = agent;
            genie.show();
            centerGenie(true);
        });
        scaleElements();
        window.addEventListener("message", handleMsg, true);
        window.addEventListener('resize', function (event) {
            scaleElements();
            debounce(function () {
                centerGenie(false);
            })(event);
        });
    </script>
</body>
</html>
